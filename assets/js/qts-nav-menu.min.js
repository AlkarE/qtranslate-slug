jQuery(document).ready(function(a){function b(){a(".item-title").each(function(){e[a(this).closest("li").attr("id")]=[],e[a(this).closest("li").attr("id")].Title=a(this).find("span").html(),"undefined"==typeof e[a(this).closest("li").attr("id")].Original&&(e[a(this).closest("li").attr("id")].Original=e[a(this).closest("li").attr("id")].Title)}),a(".menu-item").each(function(){this_label=a(this).find("input.edit-menu-item-title"),this_title=a(this).find("input.edit-menu-item-attr-title"),e[a(this).attr("id")][this_label.attr("id")]=this_label.val(),e[a(this).attr("id")][this_title.attr("id")]=this_title.val()})}function c(){regexp=new RegExp("<!--:"+h+"-->(.*?)<!--:-->","i"),a(".item-title").each(function(){(matches=e[a(this).closest("li").attr("id")].Original.match(regexp))&&a(this).closest("li").find(".link-to-original a").text(matches[1])}),regexp2=new RegExp("<!--:"+h+"-->(.*?)<!--:-->","i"),a(".menu-item").each(function(){this_label=a(this).find("input.edit-menu-item-title"),this_title=a(this).find("input.edit-menu-item-attr-title"),"all"===h?(this_label.val(e[a(this).attr("id")][this_label.attr("id")]),this_title.val(e[a(this).attr("id")][this_title.attr("id")])):((matches=e[a(this).attr("id")][this_label.attr("id")].match(regexp2))&&this_label.val(matches[1]),(matches2=e[a(this).attr("id")][this_title.attr("id")].match(regexp2))&&this_title.val(matches2[1]))})}function d(){a(".menu-item").each(function(){this_label=a(this).find("input.edit-menu-item-title"),this_title=a(this).find("input.edit-menu-item-attr-title"),this_label.val(e[a(this).attr("id")][this_label.attr("id")]),this_title.val(e[a(this).attr("id")][this_title.attr("id")]),a(this).find(".link-to-original a").text(e[a(this).closest("li").attr("id")].Original)})}var e=[],f=wpNavMenu.addMenuItemToBottom;wpNavMenu.addMenuItemToBottom=function(a,d){f(a,d),b(),c()};var g=wpNavMenu.addMenuItemToTop;wpNavMenu.addMenuItemToTop=function(a,d){g(a,d),b(),c()};var h=a("#qt-languages :radio:checked").val();b(),c(),a(document).ajaxComplete(function(){h=a("#qt-languages :radio:checked").val(),c()}),a("#qt-languages :radio").change(function(){h=a("#qt-languages :radio:checked").val(),c()}),a(".submit-add-to-menu").click(function(){h=a("#qt-languages :radio:checked").val(),c()}),a(document.body).on("change","input.edit-menu-item-title",null,function(){regexp=new RegExp("<!--:"+h+"-->(.*?)<!--:-->","i");var b=e[a(this).closest("li").attr("id")][a(this).attr("id")],c=a(this).val();regexp.test(b)&&(e[a(this).closest("li").attr("id")][a(this).attr("id")]=b.replace(regexp,"<!--:"+h+"-->"+c+"<!--:-->"))}),a(document.body).on("change","input.edit-menu-item-attr-title",null,function(){regexp=new RegExp("<!--:"+h+"-->(.*?)<!--:-->","i");var b=e[a(this).closest("li").attr("id")][a(this).attr("id")],c=a(this).val();qts_new_string="<!--:"+h+"-->"+c+"<!--:-->","undefined"==typeof b||""==b?(e[a(this).closest("li").attr("id")][a(this).attr("id")]=qts_new_string,a(this).val(qts_new_string)):regexp.test(b)?e[a(this).closest("li").attr("id")][a(this).attr("id")]=b.replace(regexp,qts_new_string):(a(this).val(b+qts_new_string),e[a(this).closest("li").attr("id")][a(this).attr("id")]=b+qts_new_string)}),a(".menu-save").click(function(){d()}),window.onbeforeunload=function(){d()}});